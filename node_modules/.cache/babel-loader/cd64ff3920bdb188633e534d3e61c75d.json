{"ast":null,"code":"var _jsxFileName = \"/Users/georgia.leng/Desktop/CCT3/tidy-keep/tidy-keep-client/src/components/SignUp.jsx\";\nimport React from \"react\";\n\nclass SignUp extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      email: \"\",\n      password: \"\"\n    };\n\n    this.onInputChange = event => {\n      const key = event.target.id;\n      this.setState({\n        [key]: event.target.value\n      });\n    };\n\n    this.onFormSubmit = async event => {\n      event.preventDefault();\n      const {\n        email,\n        password\n      } = this.state;\n\n      try {\n        const response = await fetch(\"http://localhost:3000/sign-up\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            user: {\n              email,\n              password\n            }\n          })\n        });\n\n        if (response.status >= 400) {\n          throw new Error(\"incorrect credentials\");\n        } else {\n          const response = await fetch(\"http://localhost:3000/login\", {\n            method: \"POST\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n              auth: {\n                email,\n                password\n              }\n            })\n          });\n          const {\n            jwt\n          } = await response.json();\n          localStorage.setItem(\"token\", jwt);\n          this.props.history.push(\"/secrets\");\n        }\n      } catch (err) {\n        console.log(err.message);\n      }\n    };\n  }\n\n  render() {\n    const {\n      email,\n      password\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }\n    }, \"Sign Up\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.onFormSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"email\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      name: \"email\",\n      id: \"email\",\n      value: email,\n      onChange: this.onInputChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      id: \"password\",\n      value: password,\n      onChange: this.onInputChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default SignUp;","map":{"version":3,"sources":["/Users/georgia.leng/Desktop/CCT3/tidy-keep/tidy-keep-client/src/components/SignUp.jsx"],"names":["React","SignUp","Component","state","email","password","onInputChange","event","key","target","id","setState","value","onFormSubmit","preventDefault","response","fetch","method","headers","body","JSON","stringify","user","status","Error","auth","jwt","json","localStorage","setItem","props","history","push","err","console","log","message","render"],"mappings":"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","sourcesContent":["import React from \"react\";\n\nclass SignUp extends React.Component {\n  state = { email: \"\", password: \"\" };\n\n  onInputChange = (event) => {\n    const key = event.target.id;\n    this.setState({\n      [key]: event.target.value,\n    });\n  };\n\n  onFormSubmit = async (event) => {\n    event.preventDefault();\n    const { email, password } = this.state;\n    try {\n      const response = await fetch(\"http://localhost:3000/sign-up\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ user: { email, password }}),\n      });\n      if (response.status >= 400) {\n        throw new Error(\"incorrect credentials\");\n      } else {\n        const response = await fetch(\"http://localhost:3000/login\", {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({ auth: { email, password }}),\n        })\n        const { jwt } = await response.json()\n        localStorage.setItem(\"token\", jwt);\n        this.props.history.push(\"/secrets\");\n      }\n    } catch (err) {\n      console.log(err.message)\n    }\n  };\n\n  render() {\n    const { email, password } = this.state;\n    return (\n      <div className=\"container\">\n        <h1>Sign Up</h1>\n        <form onSubmit={this.onFormSubmit}>\n          <label htmlFor=\"email\">Email</label>\n          <input\n            type=\"email\"\n            name=\"email\"\n            id=\"email\"\n            value={email}\n            onChange={this.onInputChange}\n          />\n          <label htmlFor=\"password\">Password</label>\n          <input\n            type=\"password\"\n            name=\"password\"\n            id=\"password\"\n            value={password}\n            onChange={this.onInputChange}\n          />\n          <input type=\"submit\" value=\"Submit\" />\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default SignUp;\n"]},"metadata":{},"sourceType":"module"}